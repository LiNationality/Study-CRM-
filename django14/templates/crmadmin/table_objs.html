{% extends 'base.html' %}
{% load tags %}



{% block content %}

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://v3.bootcss.com/examples/dashboard/#">河北大学CRM</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">

            <li><a href="javascript:void (0);">{{ request.user }}</a></li>
{#            <li><a href="#">Settings</a></li>#}
{#            <li><a href="#">Profile</a></li>#}
{#            <li><a href="https://v3.bootcss.com/examples/dashboard/#">Help</a></li>#}
          </ul>
          <form class="navbar-form navbar-right">
            <input type="text" class="form-control" placeholder="Search...">
          </form>
        </div>
      </div>
    </nav>


    <div class="container-fluid jumbotron">
        <div class="">
            <div class="panel panel-primary">

              <div class="panel-heading">
                  <h2 class="panel-title h1">
                      {% get_model_name admin_class %}
                      <a href="{{ request.path }}add/" class="pull-right"><button class="btn btn-info">Add</button></a>
                  </h2>

              </div>

              <div class="panel-body">
{#                   过滤                   #}
                <div class="row">
                    <form action="" class="" method="get">
                        {% for condtion in admin_class.list_filters %}
                            <div class="col-lg-2">
                            <span>{{ condtion }}</span>
                            {% render_filter_ele condtion admin_class filter_condtions %}
                            </div>
                        {% endfor %}
                        <hr>
                            <button type="SUBMIT" class="btn btn-success">检索</button>
                            <div class="row">
                                <div class="col-lg-2">
                                    <input type="search" name="_q" class="form-control" style="margin-left: 15px;">
                                </div>
                                <div class="col-lg-2">
                                    <button type="SUBMIT" class="btn btn-success">查找</button>
                                </div>
                            </div>
                    </form>
                </div>



{#                {{ admin_class.list_display }}#}
                  <table class="table table-hover">
                      <thead>
                        <tr>
                        <th style="width: 35px"><input type="checkbox" onclick="CheckAllToggle(this)"> </th>
                            {% for column in admin_class.list_display %}
                                {% build_table_header_column column orderby_key filter_condtions %}
                            {% endfor %}
                        </tr>
                      </thead>
                      <tbody>
{#                        {% get_query_sets  admin_class as query_sets %}#}
                        {% for obj in query_sets %}
                        <tr>
                        <td><input type="checkbox" value="{{ obj.id }}" tag="obj_checkbox"></td>
                            {% build_table_row request obj admin_class  %}
                        </tr>
                        {% endfor %}
                      </tbody>
                  </table>
              总计{{ query_sets.paginator.count }}条
              <nav>

                  <ul class="pagination">
                              {% if query_sets.has_previous %}
                                    <li class=""><a href="?page={{ query_sets.previous_page_number }}">上页</a></li>
                              {% endif %}
            {#                   <li class="active"><a>{{ query_sets.number }}</a></li>#}

            {#                  {% for loop_counter in query_sets.paginator.page_range %}#}
            {#                        {% render_page_ele  loop_counter query_sets filter_condtions%}#}
            {#                  {% endfor %}#}

                              {% build_paginators query_sets   filter_condtions  previous_orderby search_text%}

                              {% if query_sets.has_next %}
                                    <li class=""><a href="?page={{ query_sets.next_page_number }}">下页</a></li>
                              {% endif %}


            {#                <li class="disabled"><a href="#">&laquo;</a></li>#}
            {#                <li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>#}
            {#                #}
                          </ul>
              </nav>
              </div>
            </div>
        </div>
    </div>

{% endblock %}